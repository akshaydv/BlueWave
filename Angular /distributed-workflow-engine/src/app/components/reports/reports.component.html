<div class="container">
  <div *ngIf="!loading"><mat-progress-spinner mode="indeterminate"></mat-progress-spinner></div>
  <mat-card class="main" *ngIf="loading">
    Reports
    <p>Choose the job for which you wish to see the report!</p>
    <mat-expansion-panel *ngFor="let name of jobIdnames; let i = index">
      <mat-expansion-panel-header (click)="getJobReports(name.jobId)">
        <mat-panel-title>
          JobId
        </mat-panel-title>
        <mat-panel-description>
          {{name.jobId}}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <p> Workflow Name: {{name.workFlowName}}</p>
      <p>Job Start Time: {{jobStartTime | date: 'short'}} </p>
      <p>Job End Time: {{jobEndTime | date: 'short'}} </p>
      <p>Job Status: {{jobStatus}}</p>

      <mat-tab-group>
        <mat-tab label="{{task.taskAlias}}" *ngFor="let task of taskLogs">
          <p> TaskStartTime: {{task.taskStartTime | date: 'short'}}</p>
          <p> TaskEndTime: {{task.taskEndTime | date: 'short'}}</p>
          <!-- <mat-expansion-panel #expansion class="logs-list" *ngIf="this.task.taskLogs!=null">
            <mat-expansion-panel-header>
              <mat-panel-title>View Logs</mat-panel-title>
            </mat-expansion-panel-header>
            <div class="logsreport" *ngFor="let line of this.task.taskLogs.split('\n')">
              {{line}}
            </div>
          </mat-expansion-panel> -->
          <mat-card class="console" *ngIf="this.task.taskLogs!=null">
            <mat-card-title>Console output</mat-card-title>
            <mat-card-content class="consolecontainer">
              <div *ngFor="let line of this.task.taskLogs.split('\n')">
                <code>
                    {{line}}
                  </code>
              </div>
            </mat-card-content>
          </mat-card>
        </mat-tab>
      </mat-tab-group>

      <div *ngIf="showWaterFall">
        <ngx-charts-bar-horizontal-stacked [view]="view" [scheme]="colorScheme" [results]="tasks" [gradient]="gradient" [xAxis]="showXAxis"
          [yAxis]="showYAxis" [legend]="showLegend" [showXAxisLabel]="showXAxisLabel" [showYAxisLabel]="showYAxisLabel" [xAxisLabel]="xAxisLabel"
          [yAxisLabel]="yAxisLabel" (select)="onSelect($event)">
        </ngx-charts-bar-horizontal-stacked>
      </div>
    </mat-expansion-panel>
    <mat-paginator 
      [length]="length" 
      [pageSize]="pageSize" 
      [pageSizeOptions]="pageSizeOptions" 
      (page)="pageEvent = $event; updatePage()">
    </mat-paginator>
    <div matTooltip="Add a new workflow!" class="app-fab--absolute" matTooltipPosition="left">
      <button mat-fab color="primary" aria-label="Add Workflow" (click)="viewmodeexit()" [routerLink]="['/addworkflow']">
        <i class="material-icons">add_circle</i>
      </button>
    </div>
  </mat-card>

  <br>
  <br>
  <br>
</div>